(function(x){function t(t,a,r){var n=this;return this.on("click.pjax",t,function(t){var e=x.extend({},u(a,r));if(!e.container)e.container=x(this).attr("data-pjax")||n;e.keepjs=x(this).attr("data-keepjs");i(t,e)})}function i(t,e,a){a=u(e,a);var r=t.currentTarget;if(r.tagName.toUpperCase()!=="A")throw"$.fn.pjax or $.pjax.click requires an anchor element";if(t.which>1||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey)return;if(location.protocol!==r.protocol||location.hostname!==r.hostname)return;if(r.href.indexOf("#")>-1&&s(r)==s(location))return;if(t.isDefaultPrevented())return;var n={url:r.href,container:x(r).attr("data-pjax"),target:r};var i=x.extend({},n,a);var o=x.Event("pjax:click");x(r).trigger(o,[i]);if(!o.isDefaultPrevented()){g(i);t.preventDefault();x(r).trigger("pjax:clicked",[i])}}function e(t,e,a){a=u(e,a);var r=t.currentTarget;var n=x(r);if(r.tagName.toUpperCase()!=="FORM")throw"$.pjax.submit requires a form element";var i={type:(n.attr("method")||"GET").toUpperCase(),url:n.attr("action"),container:n.attr("data-pjax"),target:r};if(i.type!=="GET"&&window.FormData!==undefined){i.data=new FormData(r);i.processData=false;i.contentType=false}else{if(x(r).find(":file").length){return}i.data=x(r).serializeArray()}g(x.extend({},i,a));t.preventDefault()}function g(d){d=x.extend(true,{},x.ajaxSetup(),g.defaults,d);if(typeof d.url==="function"){d.url=d.url()}var n=d.target;var h=b(d.url).hash;var t=x.type(d.container);if(t!=="string"){throw"expected string value for 'container' option; got "+t}var v=d.context=x(d.container);if(!v.length){throw"the container selector '"+d.container+"' did not match anything"}if(!d.data)d.data={};if(Array.isArray(d.data)){d.data.push({name:"_pjax",value:d.container})}else{d.data._pjax=d.container}function m(t,e,a){if(!a)a={};a.relatedTarget=n;var r=x.Event(t,a);v.trigger(r,e);return!r.isDefaultPrevented()}var r;d.beforeSend=function(t,e){if(e.type!=="GET"){e.timeout=0}t.setRequestHeader("X-PJAX","true");t.setRequestHeader("X-PJAX-Container",d.container);if(!m("pjax:beforeSend",[t,e]))return false;if(e.timeout>0){r=setTimeout(function(){if(m("pjax:timeout",[t,d]))t.abort("timeout")},e.timeout);e.timeout=0}var a=b(e.url);if(h)a.hash=h;d.requestUrl=c(a)};d.complete=function(t,e){if(r)clearTimeout(r);m("pjax:complete",[t,e,d]);m("pjax:end",[t,d])};d.error=function(t,e,a){var r=T("",t,d);var n=m("pjax:error",[t,e,a,d]);if(d.type=="GET"&&e!=="abort"&&n){j(r.url)}};d.success=function(t,e,a){var r=g.state;var n=typeof x.pjax.defaults.version==="function"?x.pjax.defaults.version():x.pjax.defaults.version;var i=a.getResponseHeader("X-PJAX-Version");var o=T(t,a,d);var s=b(o.url);if(h){s.hash=h;o.url=s.href}if(n&&i&&n!==i){j(o.url);return}if(!o.contents){j(o.url);return}g.state={id:d.id||y(),url:o.url,title:o.title,container:d.container,fragment:d.fragment,timeout:d.timeout};if(d.push||d.replace){window.history.replaceState(g.state,o.title,o.url)}var u=x.contains(d.container,document.activeElement);if(u){try{document.activeElement.blur()}catch(t){}}if(o.title)document.title=o.title;m("pjax:beforeReplace",[o.contents,d],{state:g.state,previousState:r});v.html(o.contents);var c=v.find("input[autofocus], textarea[autofocus]").last()[0];if(c&&document.activeElement!==c){c.focus()}E(o.scripts);var f=d.scrollTo;if(h){var l=decodeURIComponent(h.slice(1));var p=document.getElementById(l)||document.getElementsByName(l)[0];if(p)f=x(p).offset().top}if(typeof f=="number")x(window).scrollTop(f);m("pjax:success",[t,e,a,d])};if(!g.state){g.state={id:y(),url:window.location.href,title:document.title,container:d.container,fragment:d.fragment,timeout:d.timeout};window.history.replaceState(g.state,document.title)}p(g.xhr);g.options=d;var e=g.xhr=x.ajax(d);if(e.readyState>0){if(d.push&&!d.replace){k(g.state.id,w(v));window.history.pushState(null,"",d.requestUrl)}m("pjax:start",[e,d]);m("pjax:send",[e,d])}return g.xhr}function a(t,e){var a={url:window.location.href,push:false,replace:true,scrollTo:false};return g(x.extend(a,u(t,e)))}function j(t){window.history.replaceState(null,"",g.state.url);window.location.replace(t)}var f=true;var l=window.location.href;var r=window.history.state;if(r&&r.container){g.state=r}if("state"in window.history){f=false}function n(t){if(!f){p(g.xhr)}var e=g.state;var a=t.state;var r;if(a&&a.container){if(f&&l==a.url)return;if(e){if(e.id===a.id)return;r=e.id<a.id?"forward":"back"}var n=v[a.id]||[];var i=x(n[0]||a.container),o=n[1];if(i.length){if(e){P(r,e.id,w(i))}var s=x.Event("pjax:popstate",{state:a,direction:r});i.trigger(s);var u={id:a.id,url:a.url,container:i,push:false,fragment:a.fragment,timeout:a.timeout,scrollTo:false};if(o){i.trigger("pjax:start",[null,u]);g.state=a;if(a.title)document.title=a.title;var c=x.Event("pjax:beforeReplace",{state:a,previousState:e});i.trigger(c,[o,u]);i.html(o);i.trigger("pjax:end",[null,u])}else{g(u)}i[0].offsetHeight}else{j(location.href)}}f=false}function o(t){var e=x.isFunction(t.url)?t.url():t.url,a=t.type?t.type.toUpperCase():"GET";var r=x("<form>",{method:a==="GET"?"GET":"POST",action:e,style:"display:none"});if(a!=="GET"&&a!=="POST"){r.append(x("<input>",{type:"hidden",name:"_method",value:a.toLowerCase()}))}var n=t.data;if(typeof n==="string"){x.each(n.split("&"),function(t,e){var a=e.split("=");r.append(x("<input>",{type:"hidden",name:a[0],value:a[1]}))})}else if(x.isArray(n)){x.each(n,function(t,e){r.append(x("<input>",{type:"hidden",name:e.name,value:e.value}))})}else if(typeof n==="object"){var i;for(i in n)r.append(x("<input>",{type:"hidden",name:i,value:n[i]}))}x(document.body).append(r);r.submit()}function p(t){if(t&&t.readyState<4){t.onreadystatechange=x.noop;t.abort()}}function y(){return(new Date).getTime()}function w(t){var e=t.clone();e.find("script").each(function(){if(!this.src)jQuery._data(this,"globalEval",false)});return[t.selector,e.contents()]}function c(t){t.search=t.search.replace(/([?&])(_pjax|_)=[^&]*/g,"");return t.href.replace(/\?($|#)/,"$1")}function b(t){var e=document.createElement("a");e.href=t;return e}function s(t){return t.href.replace(/#.*/,"")}function u(t,e){if(t&&e){e=x.extend({},e);e.container=t;return e}else if(x.isPlainObject(t)){return t}else{return{container:t}}}function d(t,e){return t.filter(e).add(t.find(e))}function h(t){return x.parseHTML(t,document,true)}function T(t,e,a){var r={},n=/<html/i.test(t);var i=e.getResponseHeader("X-PJAX-URL");r.url=i?c(b(i)):a.requestUrl;if(n){var o=x(h(t.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0]));var s=x(h(t.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]))}else{var o=s=x(h(t))}if(s.length===0)return r;r.title=d(o,"title").last().text();if(a.fragment){var u;if(a.fragment==="body"){u=s}else{u=d(s,a.fragment).first()}if(u.length){r.contents=a.fragment==="body"?u:u.contents();if(!r.title)r.title=u.attr("title")||u.data("title")}}else if(!n){r.contents=s}if(r.contents){r.contents=r.contents.not(function(){return x(this).is("title")});r.contents.find("title").remove();if(!a.keepjs||a.keepjs=="false"||a.keepjs=="0"){r.scripts=d(r.contents,"script[src]").remove();r.contents=r.contents.not(r.scripts)}}if(r.title)r.title=String(r.title).trim();return r}function E(t){if(!t)return;var n=x("script[src]");t.each(function(){var t=this.src;var e=n.filter(function(){return this.src===t});if(e.length)return;var a=document.createElement("script");var r=x(this).attr("type");if(r)a.type=r;a.src=x(this).attr("src");document.head.appendChild(a)})}var v={};var m=[];var S=[];function k(t,e){v[t]=e;S.push(t);A(m,0);A(S,g.defaults.maxCacheLength)}function P(t,e,a){var r,n;v[e]=a;if(t==="forward"){r=S;n=m}else{r=m;n=S}r.push(e);if(e=n.pop())delete v[e];A(r,g.defaults.maxCacheLength)}function A(t,e){while(t.length>e)delete v[t.shift()]}function C(){return x("meta").filter(function(){var t=x(this).attr("http-equiv");return t&&t.toUpperCase()==="X-PJAX-VERSION"}).attr("content")}function D(){x.fn.pjax=t;x.pjax=g;x.pjax.enable=x.noop;x.pjax.disable=R;x.pjax.click=i;x.pjax.submit=e;x.pjax.reload=a;x.pjax.defaults={timeout:650,push:true,replace:false,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:C,keepjs:false};x(window).on("popstate.pjax",n)}function R(){x.fn.pjax=function(){return this};x.pjax=o;x.pjax.enable=D;x.pjax.disable=x.noop;x.pjax.click=x.noop;x.pjax.submit=x.noop;x.pjax.reload=function(){window.location.reload()};x(window).off("popstate.pjax",n)}if(x.inArray("state",x.event.props)<0)x.event.props.push("state");x.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/);x.support.pjax?D():R()})(jQuery);