(function(){var n,a="#CPU-Usage",e="#Net-Usage",r="#NetPacket-Usage";var i,o,s,l={series:{lines:{show:true,lineWidth:2,fill:true,fillColor:{colors:[{opacity:.25},{opacity:.25}]}},points:{show:false},shadowSize:2},legend:{show:true},grid:{labelMargin:10,axisMargin:500,hoverable:true,clickable:true,tickColor:"rgba(0,0,0,0.15)",borderWidth:0},colors:["#B450B2","#4A8CF7","#52e136"],xaxis:{mode:"time",tickSize:[2,"second"],tickFormatter:function(t,e){var n=new Date(t);if(n.getSeconds()%10==0){var a=n.getHours()<10?"0"+n.getHours():n.getHours();var r=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes();var i=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds();return a+":"+r+":"+i}return""}},yaxis:{min:0,max:100,tickSize:10,tickFormatter:function(t,e){if(t%10==0)return t+"%";return""}}},c={series:{lines:{show:true,lineWidth:2,fill:true,fillColor:{colors:[{opacity:.25},{opacity:.25}]}},points:{show:false},shadowSize:2},legend:{show:true},grid:{labelMargin:10,axisMargin:500,hoverable:true,clickable:true,tickColor:"rgba(0,0,0,0.15)",borderWidth:0},colors:["#B450B2","#4A8CF7","#52e136"],xaxis:{mode:"time",tickSize:[2,"second"],tickFormatter:function(t,e){var n=new Date(t);if(n.getSeconds()%10==0){var a=n.getHours()<10?"0"+n.getHours():n.getHours();var r=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes();var i=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds();return a+":"+r+":"+i}return""}},yaxis:{tickFormatter:function(t,e){return App.formatBytes(t)}}},u={series:{lines:{show:true,lineWidth:2,fill:true,fillColor:{colors:[{opacity:.25},{opacity:.25}]}},points:{show:false},shadowSize:2},legend:{show:true},grid:{labelMargin:10,axisMargin:500,hoverable:true,clickable:true,tickColor:"rgba(0,0,0,0.15)",borderWidth:0},colors:["#B450B2","#4A8CF7","#52e136"],xaxis:{mode:"time",tickSize:[2,"second"],tickFormatter:function(t,e){var n=new Date(t);if(n.getSeconds()%10==0){var a=n.getHours()<10?"0"+n.getHours():n.getHours();var r=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes();var i=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds();return a+":"+r+":"+i}return""}}};function d(t){return[{data:t.Net.BytesRecv,label:App.i18n.chart.DOWNLOAD_SPEED},{data:t.Net.BytesSent,label:App.i18n.chart.UPLOAD_SPEED}]}function f(t){o.setData(t);o.setupGrid();o.draw()}function g(t){data=d(t);o=$(e).data("plot");if(!o)return p(data);f(data)}function p(t){o=$.plot($(e),t,c);$(e).data("plot",o)}function w(t){return[{data:t.Net.PacketsRecv,label:App.i18n.chart.RECV_PACKETS},{data:t.Net.PacketsSent,label:App.i18n.chart.SENT_PACKETS}]}function S(t){s.setData(t);s.setupGrid();s.draw()}function h(t){data=w(t);s=$(r).data("plot");if(!s)return v(data);S(data)}function v(t){s=$.plot($(r),t,u);$(r).data("plot",s)}function b(t){return[{data:t.CPU,label:App.i18n.chart.CPU_USAGE},{data:t.Mem,label:App.i18n.chart.MEMORY_USAGE}]}function k(t){i.setData(t);i.setupGrid();i.draw()}function A(t){data=b(t);i=$(a).data("plot");if(!i)return M(data);k(data)}function M(t){i=$.plot($(a),t,l);$(a).data("plot",i)}function t(e){if(n){if(e!=null)e();return false}var t=App.wsURL(BACKEND_URL);n=new WebSocket(t+"/server/dynamic");n.onopen=function(t){if(e!=null)e()};n.onclose=function(t){n=null};n.onmessage=function(t){if($(a).length<1){n.close();C();return}var e=JSON.parse(t.data);A(e);g(e);h(e)}}function m(){t(function(){n.send("ping")});if($(a).length<1)C()}function C(){if(typeof window._interval!="undefined"&&window._interval){clearInterval(window._interval)}}$(function(){C();m();window._interval=window.setInterval(m,2e3)})})();